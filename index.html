<!doctype html>
<html lang="sr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>35 godina mature â€” Generacija 1972 (matura 1991) | Bor</title>
  <meta name="description" content="Proslava 35 godina mature â€” Gimnazija Bora StankoviÄ‡, Bor. Generacija 1972, matura 1991. RSVP + Razredni AI chatbot." />
  <style>
    :root { --bg:#0b0f1a; --card:#121a2b; --txt:#e8eefc; --muted:#b8c4e6; --line:#2a3a66; --accent:#38bdf8; }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:radial-gradient(1200px 700px at 10% 10%, #122048 0%, var(--bg) 55%);color:var(--txt);line-height:1.6}
    a{color:var(--accent);text-decoration:none}
    .wrap{max-width:980px;margin:0 auto;padding:24px}
    .nav{position:sticky;top:0;backdrop-filter:blur(10px);background:rgba(11,15,26,.72);border-bottom:1px solid rgba(56,189,248,.25);z-index:10}
    .navin{display:flex;justify-content:space-between;align-items:center;gap:12px;padding:12px 24px;max-width:980px;margin:0 auto}
    .brand{font-weight:800;letter-spacing:.3px}
    .btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;border:1px solid rgba(56,189,248,.45);background:rgba(56,189,248,.12);color:var(--txt);
      padding:10px 14px;border-radius:12px;cursor:pointer}
    .btn:hover{transform:translateY(-1px)}
    .btn.primary{background:rgba(56,189,248,.22);border-color:rgba(56,189,248,.7)}
    .hero{padding:34px 0 10px}
    h1{font-size:clamp(28px,4vw,44px);line-height:1.15;margin:0 0 12px}
    .sub{color:var(--muted);margin:0 0 18px}
    .grid{display:grid;grid-template-columns:1.2fr .8fr;gap:18px}
    @media (max-width:880px){.grid{grid-template-columns:1fr}}
    .card{background:linear-gradient(180deg, rgba(18,26,43,.92), rgba(18,26,43,.68));
      border:1px solid rgba(56,189,248,.18);border-radius:16px;padding:16px}
    .kpi{display:grid;grid-template-columns:repeat(2,1fr);gap:10px}
    .kpi .item{padding:12px;border:1px solid rgba(42,58,102,.7);border-radius:14px;background:rgba(0,0,0,.12)}
    .muted{color:var(--muted)}
    .section{padding:14px 0}
    .section h2{margin:0 0 8px;font-size:22px}
    ul{margin:8px 0 0;padding-left:18px}
    input,select,textarea{width:100%;padding:11px 12px;border-radius:12px;border:1px solid rgba(42,58,102,.8);background:rgba(0,0,0,.18);color:var(--txt)}
    label{font-size:13px;color:var(--muted)}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    @media (max-width:640px){.row{grid-template-columns:1fr}}
    .small{font-size:13px}
    .chatbox{display:flex;flex-direction:column;gap:10px}
    .chatlog{height:260px;overflow:auto;border-radius:14px;border:1px solid rgba(42,58,102,.8);background:rgba(0,0,0,.16);padding:12px}
    .msg{margin:0 0 10px}
    .msg b{display:block;font-size:12px;color:var(--muted)}
    .toast{margin-top:8px;color:#9ae6b4}
    .err{margin-top:8px;color:#fca5a5}
    footer{padding:18px 0 28px;color:var(--muted);font-size:13px}
  </style>
</head>
<body>
  <div class="nav">
    <div class="navin">
      <div class="brand">ğŸ“ Bora â€™91 â€” Generacija â€™72</div>
      <div style="display:flex;gap:10px;flex-wrap:wrap">
        <a class="btn" href="#rsvp">âœ… RSVP</a>
        <a class="btn primary" href="#chat">ğŸ¤– Razredni AI</a>
      </div>
    </div>
  </div>

  <div class="wrap">
    <header class="hero">
      <div class="grid">
        <div>
          <h1>35 godina mature â€” Generacija 1972 (matura 1991)</h1>
          <p class="sub">Gimnazija â€œBora StankoviÄ‡â€, Bor â€¢ â€œPreÅ¾iveli smo 90-te. PreÅ¾iveÄ‡emo i veÄe seÄ‡anja.â€</p>
          <div style="display:flex;gap:10px;flex-wrap:wrap">
            <a class="btn primary" href="#rsvp">Prijavi dolazak</a>
            <a class="btn" href="#anegdote">Dodaj anegdotu</a>
            <a class="btn" href="#chat">Pitaj Razrednog AI</a>
          </div>
          <p class="muted small" style="margin-top:12px">
            *Sajt je javno dostupan da se svi lakÅ¡e naÄ‘u. Ne objavljujemo privatne podatke.
          </p>
        </div>

        <div class="card">
          <h2 style="margin:0 0 10px">Osnovne informacije</h2>
          <div class="kpi">
            <div class="item"><div class="muted small">ğŸ—“ï¸ Datum</div><div><b id="eventDate">[DD.MM.2026]</b></div></div>
            <div class="item"><div class="muted small">ğŸ•– Vreme</div><div><b id="eventTime">[19:00]</b></div></div>
            <div class="item"><div class="muted small">ğŸ“ Lokacija</div><div><b id="eventPlace">[Restoran / sala, Bor]</b></div></div>
            <div class="item"><div class="muted small">ğŸ“ Kontakt</div><div><b id="eventContact">[Ime + telefon]</b></div></div>
          </div>
          <p class="muted small" style="margin:10px 0 0">
            Savet: doÄ‘i 15 minuta ranije da izbegnemo â€œA ti siâ€¦?â€ guÅ¾vu ğŸ˜„
          </p>
        </div>
      </div>
    </header>

    <section class="section card" id="program">
      <h2>Program veÄeri</h2>
      <ul>
        <li>19:00 â€” Okupljanje & prvi talas â€œprepoznavanjaâ€</li>
        <li>19:30 â€” Grupna fotka (da posle ne jurimo)</li>
        <li>20:00 â€” VeÄera</li>
        <li>21:00 â€” Mini glasanje: â€œko se najmanje promenio?â€</li>
        <li>22:00 â€” Muzika â€™90-ih & ples (po Å¾elji i po zglobovima)</li>
      </ul>
    </section>

    <section class="section grid">
      <div class="card">
        <h2>Garderoba</h2>
        <p class="muted">Smart casual / elegantno opuÅ¡teno. Udobna obuÄ‡a je pametnija od ponosa.</p>
        <ul>
          <li>âœ… Sako + koÅ¡ulja / lepa bluza</li>
          <li>âœ… Udobno, ali sveÄano</li>
          <li>âŒ Sako iz â€™91 (ako ima tragove naftalina â€” ne rizikuj)</li>
        </ul>
      </div>
      <div class="card">
        <h2>PiÄ‡e & hrana</h2>
        <p class="muted">Predlog â€œNostalgija paketaâ€: vino + mineralna + priÄa koja poÄinje sa â€œSeÄ‡aÅ¡ li se kadâ€¦â€.</p>
        <ul>
          <li>ğŸ· Vino / pivo / bezalkoholno</li>
          <li>ğŸ¥ƒ Rakijica (odgovorno)</li>
          <li>ğŸ° Desert (inflacija porcije, ali ne i raspoloÅ¾enja)</li>
        </ul>
      </div>
    </section>

    <section class="section card" id="rsvp">
      <h2>RSVP â€” Prijavi dolazak</h2>
      <p class="muted small">UpiÅ¡i samo osnovno. Ne skupljamo niÅ¡ta â€œviÅ¡e nego Å¡to trebaâ€.</p>

      <form id="rsvpForm">
        <div class="row">
          <div>
            <label>Ime</label>
            <input name="name" required placeholder="npr. Marko" />
          </div>
          <div>
            <label>Dolazim</label>
            <select name="coming" required>
              <option value="YES">Da</option>
              <option value="MAYBE">MoÅ¾da</option>
              <option value="NO">Ne</option>
            </select>
          </div>
        </div>
        <div class="row" style="margin-top:10px">
          <div>
            <label>Broj osoba (ukljuÄujuÄ‡i tebe)</label>
            <input name="guests_count" type="number" min="1" value="1" />
          </div>
          <div>
            <label>Napomena (opciono)</label>
            <input name="note" placeholder="npr. stiÅ¾em malo kasnije" />
          </div>
        </div>
        <div style="margin-top:12px;display:flex;gap:10px;flex-wrap:wrap">
          <button class="btn primary" type="submit">âœ… PoÅ¡alji RSVP</button>
          <span id="rsvpStatus" class="small muted"></span>
        </div>
      </form>
    </section>

    <section class="section card" id="anegdote">
      <h2>Dodaj anegdotu (za bota i za arhivu)</h2>
      <p class="muted small">Ako Å¾eliÅ¡ da se objavi javno, oznaÄi â€œDAâ€. Bez liÄnih podataka treÄ‡ih lica, molim ğŸ˜„</p>

      <form id="anecdoteForm">
        <div class="row">
          <div>
            <label>Tvoje ime</label>
            <input name="author" required placeholder="npr. Jelena" />
          </div>
          <div>
            <label>Da li sme javno?</label>
            <select name="allowed_public" required>
              <option value="YES">DA</option>
              <option value="NO">NE (samo organizatori)</option>
            </select>
          </div>
        </div>
        <div style="margin-top:10px">
          <label>Anegdota</label>
          <textarea name="text" required rows="4" placeholder="npr. ekskurzija, kontrolni, provala..." ></textarea>
        </div>
        <div style="margin-top:12px;display:flex;gap:10px;flex-wrap:wrap">
          <button class="btn" type="submit">ğŸ“š SaÄuvaj anegdotu</button>
          <span id="anecdoteStatus" class="small muted"></span>
        </div>
      </form>
    </section>

    <section class="section card" id="faq">
      <h2>FAQ</h2>
      <ul>
        <li><b>Da li je sajt javan?</b> Da â€” da se svi lakÅ¡e pronaÄ‘u.</li>
        <li><b>Moram li da ostavim telefon?</b> Ne.</li>
        <li><b>BiÄ‡e muzike iz â€™90-ih?</b> HoÄ‡e. I biÄ‡e â€œona pesmaâ€.</li>
      </ul>
    </section>

    <section class="section card" id="chat">
      <h2>ğŸ¤– Razredni AI Bora â€™91</h2>
      <p class="muted small">Pitaj za garderobu, piÄ‡e, program, â€œko si bio u razreduâ€, ili traÅ¾i neku anegdotu (ako je imamo u bazi).</p>

      <div class="chatbox">
        <div class="chatlog" id="chatLog"></div>
        <div class="row">
          <input id="chatInput" placeholder="Npr. â€˜Å ta da obuÄem?â€™" />
          <button class="btn primary" id="chatSend">PoÅ¡alji</button>
        </div>
        <div id="chatStatus" class="small muted"></div>
      </div>
    </section>

    <footer>
      Â© Generacija â€™72 / matura â€™91 â€” Bor â€¢ Napravljeno s ljubavlju i malo AI-a ğŸ˜„
    </footer>
  </div>

  <script>
    // 1) ZAMENI OVE URL-ove (n8n webhook endpoints)
    const RSVP_WEBHOOK_URL = "/api/rsvp.js";
    const CHAT_WEBHOOK_URL = "/api/chat";
    const ANECDOTE_WEBHOOK_URL = "/api/anecdote.js";

    // (opciono) session id za chat
    const sessionId = Math.random().toString(36).slice(2);

    const $ = (id) => document.getElementById(id);

    function addMsg(who, text){
      const wrap = document.createElement("div");
      wrap.className = "msg";
      wrap.innerHTML = `<b>${who}</b><div>${escapeHtml(text).replace(/\n/g,"<br>")}</div>`;
      $("chatLog").appendChild(wrap);
      $("chatLog").scrollTop = $("chatLog").scrollHeight;
    }

    function escapeHtml(s){
      return s.replace(/[&<>"']/g, (c)=>({ "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;" }[c]));
    }

    // Init chat welcome
    addMsg("Razredni AI", "Dobro doÅ¡ao/la! ğŸ˜„ Pitaj me za program, garderobu, piÄ‡e ili â€˜ko si bio u razreduâ€™.");

    // RSVP submit
    $("rsvpForm").addEventListener("submit", async (e)=>{
      e.preventDefault();
      $("rsvpStatus").textContent = "Å aljem...";
      const data = Object.fromEntries(new FormData(e.target).entries());

      try{
        const res = await fetch(RSVP_WEBHOOK_URL, {
          method:"POST",
          headers:{"Content-Type":"application/json"},
          body: JSON.stringify(data)
        });
        if(!res.ok) throw new Error("RSVP nije proÅ¡ao.");
        $("rsvpStatus").textContent = "Upisano âœ… Vidimo se!";
        e.target.reset();
      }catch(err){
        $("rsvpStatus").textContent = "GreÅ¡ka âŒ PokuÅ¡aj ponovo.";
      }
    });

    // Anecdote submit
    $("anecdoteForm").addEventListener("submit", async (e)=>{
      e.preventDefault();
      $("anecdoteStatus").textContent = "Å aljem...";
      const data = Object.fromEntries(new FormData(e.target).entries());

      try{
        const res = await fetch(ANECDOTE_WEBHOOK_URL, {
          method:"POST",
          headers:{"Content-Type":"application/json"},
          body: JSON.stringify(data)
        });
        if(!res.ok) throw new Error("Anegdota nije saÄuvana.");
        $("anecdoteStatus").textContent = "SaÄuvano âœ…";
        e.target.reset();
      }catch(err){
        $("anecdoteStatus").textContent = "GreÅ¡ka âŒ PokuÅ¡aj ponovo.";
      }
    });

    // Chat send
    async function sendChat(){
    const input = $("chatInput");
    const message = input.value.trim();
    if(!message) return;

    input.value = "";
    addMsg("Ti", message);
    $("chatStatus").textContent = "Razredni AI razmiÅ¡lja...";

    try{
        const res = await fetch(CHAT_WEBHOOK_URL, {
        method:"POST",
        headers:{
            "Content-Type":"application/json"
        },
        body: JSON.stringify({ message, sessionId })
        });

        console.log("Status:", res.status);

        const text = await res.text();
        console.log("Raw response:", text);

        if(!res.ok){
        throw new Error("HTTP error " + res.status);
        }

        const json = JSON.parse(text);
        addMsg("Razredni AI", json.reply || "Nisam dobio validan odgovor ğŸ˜„");
        $("chatStatus").textContent = "";

    }catch(err){
        console.error("Chat error:", err);
        addMsg("Razredni AI", "Ups â€” trenutno ne mogu do dnevnika. Probaj opet za minut ğŸ˜„");
        $("chatStatus").textContent = "";
    }
    }

    $("chatSend").addEventListener("click", sendChat);
    $("chatInput").addEventListener("keydown", (e)=>{ if(e.key==="Enter") sendChat(); });
  </script>
</body>
</html>